#!/bin/bash -xe

# Intuitives DAW macOS Preinstall Script
# Cleans up any previous installations before installing new version

# Remove any legacy launch daemons
INTUITIVES_DAEMON="/Library/LaunchDaemons/com.intuitivemusic.intuitives.launchdaemon.plist"
/bin/launchctl unload "${INTUITIVES_DAEMON}" 2>/dev/null || true
rm -f "${INTUITIVES_DAEMON}" 2>/dev/null || true

# Remove deprecated application installations
if [ -d "/Applications/Intuitives.app" ]; then
	echo "Removing previous Intuitives DAW installation"
	rm -rf /Applications/Intuitives.app
fi

if [ -d "/Applications/Intuitives DAW.app" ]; then
	echo "Removing previous Intuitives DAW installation"
	rm -rf "/Applications/Intuitives DAW.app"
fi
